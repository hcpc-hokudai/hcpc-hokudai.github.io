# HCPC 北海道大学競技プログラミングサークル
![web-deploy](https://github.com/hcpc-hokudai/hcpc-hokudai.github.io/workflows/web-deploy/badge.svg?branch=source)

- [このリポジトリに対応するホームページはこちら](https://hcpc-hokudai.github.io/)
- [旧ホームページはこちら](http://hcpc.web.fc2.com/)

## 注意 (編集者向け)

- `Gemfile` および `Gemfile.lock` は gem パッケージの管理に必要なファイルです。取扱にはご注意ください
- Nov 6, 2019 頃に構成を大きく変更しました。それ以前に `clone` していてあまりいじっていない場合は、消して再度 `clone` したほうがいろいろと楽だと思います
- Feb 18, 2021 に Travis CI から GitHub Actions に乗り換えました。これにより、このリポジトリに関するソース管理・CI 実行などといったサイト運営に必要なプロセスは、すべて GitHub に任せる形になりました。

## ビルドについて (編集者向け)

`source` ブランチにあるものは [GitHub Actions](https://github.co.jp/features/actions) によって自動で `master` ブランチにビルドされます。以下の点にご注意ください。

- **`master` ブランチにあるものを編集しないでください。** しても CI で上書きされるので無駄です。
- `source` ブランチで `jekyll build` 等をしてできる `ci-build` ディレクトリは **`push` しないでください** (`.gitignore` に書いてあるので意図的にやらない限りされないはずです)。このディレクトリは CI を走らせるときに生成・使用されるもので、リポジトリで管理する必要はありません。

## 更新方法

**`source` ブランチで作業してください**

### ページの追加

About ページや Contact のページのように、比較的上の階層をページを作るときについてです。例として、`section.md` というファイル名の `Section` というタイトルのページを作ることを考えます。

まず、root 階層に `section.md` ファイルを作ります。

他のファイルを見てみると分かるかと思いますが、先頭に YAML 形式で、そのページに関する情報を記載する必要があります。例えば、以下のような情報を入力します。

|種類|説明|
|---|---|
|layout|ページレイアウトを指定します (今回の場合は `page` です)|
|title|ページタイトルです。ページの大見出しになります|
|header-title|ホームページの header に記載されるテキストです|
|tagline|大見出しの下に記載される文章です|
|ref|他のテキストファイルから参照できるよう、作成したページのアドレスを指定します。原則、ファイル名と同じにしてください。|

YAML 形式の情報記載が済みましたら、その下に本文を Markdown 形式で記載します。HTML タグも使用可能です。

### 記事の追加

ICPC 参加報告などの記事を記載する場合は、以下の手順を踏むと編集しやすいと思います。

- ローカルで `jekyll` を使えるように環境を作ります。詳しくは [公式ページ](http://jekyllrb-ja.github.io/) などを参考にしてください。
- `jekyll serve --trace` などを叩き、ローカルで Web ページが見れるようにします。たとえば `http://localhost:4000` で見られるとします。
- ブラウザで `http://localhost:4000/admin/` を見に行きます。
- すると、管理画面のようなものにたどり着くはずです。
    - https://hcpc-hokudai.github.io/admin/ と打ってもアクセスできないことに注意します。あくまで、ローカル限定の機能です。
- ページ左にあります「Posts」をクリックします。
- すでにある記事の一覧と、「New post」ボタンがあると思いますので、「New post」をクリックします。
- 以下に従って記事を書きます。
    - `Path` は `yyyy-mm-dd-title.md` の形式で書きます。`yyyy-mm-dd` は投稿日時を表し、`title` はその記事の URL の一部になりますので、英数字のみで書いてください。
    - `Title` は記事タイトルを書きます。日本語でも英語でもよいです。
    - その下にありますテキストボックスは本文を記載するところです。Markdown 形式で書いてください。プレビューもできます。
    - さらに下に Metadata Field というものがあります。これは、先程「ページの追加」で書いた YAML 形式のデータを書く欄です。
        - `layout: post` は最低限書いてください。これを書かないと記事スタイルが崩壊します。
